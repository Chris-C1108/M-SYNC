# M-SYNC iOS 快捷指令集成

**iOS 快捷指令配置和使用指南**

## 📁 目录说明

本目录包含了 M-SYNC 系统的 iOS 快捷指令集成相关文件，帮助用户在 iPhone 上配置快捷指令，实现与桌面端的无缝消息同步。

### 📄 文件列表

| 文件名 | 描述 | 用途 |
|--------|------|------|
| `guide.md` | 📖 **配置指南** | 详细的快捷指令配置步骤和说明 |
| `shortcuts-examples.md` | 💡 **示例集合** | 各种实用的快捷指令示例和模板 |
| `msync-text-sender.shortcut` | 📱 **快捷指令文件** | 可直接导入的基础文本发送快捷指令 |
| `README.md` | 📋 **说明文档** | 本文件，目录使用说明 |

## 🚀 快速开始

### 1. 阅读配置指南
首先阅读 [`guide.md`](./guide.md) 了解：
- 支持的消息类型
- 前置准备工作
- 详细配置步骤
- 故障排除方法

### 2. 查看示例集合
参考 [`shortcuts-examples.md`](./shortcuts-examples.md) 获取：
- 实用的快捷指令示例
- 高级自动化配置
- 快捷指令模板库
- 使用技巧和优化建议

### 3. 导入快捷指令
使用 [`msync-text-sender.shortcut`](./msync-text-sender.shortcut)：
- 在 iPhone 上打开此文件
- 系统会自动打开快捷指令应用
- 按提示配置服务器地址和访问令牌
- 完成导入并测试功能

## 🎯 主要功能

### 支持的消息类型
- **📝 TEXT**: 普通文本、验证码、备注等
- **🔗 URL**: 网页链接、应用链接等  
- **💻 CODE**: 代码片段、配置文件等

### 桌面端行为
- **TEXT/CODE**: 自动复制到剪贴板
- **URL**: 在默认浏览器中打开
- **通知**: 显示操作结果反馈

### 触发方式
- **手动运行**: 点击快捷指令图标
- **Siri 语音**: "嘿Siri，发送验证码"
- **共享表单**: 从其他应用分享内容
- **自动化**: 基于条件自动触发

## 📱 常用场景

### 1. 验证码同步 🔐
```
场景: 收到银行/支付平台的验证码短信
操作: 自动识别并发送到桌面端
结果: 桌面端剪贴板包含验证码，可直接粘贴
```

### 2. 网页分享 🌐
```
场景: 在 Safari 中浏览有趣的网页
操作: 点击分享按钮，选择 M-SYNC 快捷指令
结果: 桌面端浏览器自动打开该网页
```

### 3. 剪贴板同步 📋
```
场景: 复制了一段重要文本
操作: 运行剪贴板同步快捷指令
结果: 桌面端剪贴板同步更新
```

### 4. 代码片段分享 💻
```
场景: 在手机上看到有用的代码
操作: 复制代码并通过快捷指令发送
结果: 桌面端剪贴板包含格式化的代码
```

## ⚙️ 配置要求

### 前置条件
- ✅ M-SYNC 服务器正在运行
- ✅ 桌面客户端已连接到服务器
- ✅ 获取有效的访问令牌
- ✅ iPhone 支持快捷指令 (iOS 12+)

### 网络要求
- ✅ iPhone 和服务器网络连通
- ✅ 服务器防火墙允许 HTTP/HTTPS 访问
- ✅ 建议使用 HTTPS 保证安全性

## 🔧 自定义配置

### 修改服务器地址
在快捷指令中找到服务器地址配置：
```
http://your-server.com:3000/api/v1/messages/publish
```
替换为您的实际服务器地址。

### 更新访问令牌
定期更新快捷指令中的访问令牌：
1. 从桌面客户端或服务器获取新令牌
2. 在快捷指令中更新令牌值
3. 测试连接确保正常工作

### 添加自定义逻辑
根据需要添加：
- 内容过滤和验证
- 自定义通知消息
- 错误处理和重试
- 日志记录和调试

## 🛠️ 故障排除

### 常见问题
1. **401 Unauthorized**: 检查访问令牌是否正确
2. **404 Not Found**: 检查服务器地址是否正确
3. **网络超时**: 检查网络连接和服务器状态
4. **桌面端未收到**: 确认桌面客户端连接状态

### 调试方法
1. 在快捷指令中添加通知显示中间结果
2. 使用 curl 命令测试 API 连接
3. 查看桌面客户端和服务器日志
4. 逐步测试快捷指令的每个步骤

## 📞 技术支持

### 获取帮助
- 📖 查看详细配置指南: [`guide.md`](./guide.md)
- 💡 参考示例集合: [`shortcuts-examples.md`](./shortcuts-examples.md)
- 🐛 报告问题: 创建 GitHub Issue
- 💬 社区讨论: 参与项目讨论

### 贡献内容
欢迎贡献：
- 新的快捷指令示例
- 配置指南的改进
- 故障排除经验分享
- 使用技巧和优化建议

## 🔐 安全提醒

### 隐私保护
- 🔒 不要在快捷指令中硬编码敏感信息
- 🔒 定期更换访问令牌
- 🔒 谨慎处理包含隐私的内容
- 🔒 使用 HTTPS 保护网络通信

### 最佳实践
- ✅ 定期备份快捷指令配置
- ✅ 测试快捷指令的安全性
- ✅ 监控异常的网络活动
- ✅ 及时更新系统和应用

---

**通过 iOS 快捷指令，让您的 iPhone 和桌面端实现真正的无缝协作！**

*最后更新: 2025年7月28日*
